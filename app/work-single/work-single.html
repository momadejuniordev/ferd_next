<!DOCTYPE html>
<html lang="pt">

<head>
    <title>Ferdinando — Site Pessoal de Portfólio</title>
    <link rel="icon" href="images/icon.webp" type="image/gif" sizes="16x16">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="author" content="">

    <!-- CSS Files ================================================== -->
    <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="css/plugins.css" rel="stylesheet" type="text/css">
    <link href="css/style.css" rel="stylesheet" type="text/css">
    <link href="css/coloring.css" rel="stylesheet" type="text/css">
    <link id="colors" href="css/colors/scheme-01.css" rel="stylesheet" type="text/css">

    <!-- Lightbox CSS -->
    <link href="https://cdn.jsdelivr.net/npm/lightbox2@2.11.3/dist/css/lightbox.min.css" rel="stylesheet">
</head>

<body class="dark-scheme">
    <div id="wrapper">
        <div class="float-text show-on-scroll">
            <span><a href="#">Voltar ao topo</a></span>
        </div>
        <div class="scrollbar-v show-on-scroll"></div>

        <!-- pré-carregamento -->
        <div id="de-loader"></div>

        <!-- conteúdo -->
        <div class="section-dark no-bottom no-top" id="content">
            <div id="top"></div>

            <!-- Menu -->
            <section class="no-top">
                <div class="text-fit-wrapper">
                    <h1 class="text-fit wow" id="project-title">Carregando...</h1>
                    <div class="d-menu-1 wow" data-wow-delay=".3s">
                        <ul>
                            <li><a href="index.html">Início</a></li>
                            <li><a href="about.html">Sobre Mim</a></li>
                            <li><a href="services.html">O que faço</a></li>
                            <li class="active"><a href="works.html">Portfólio</a></li>
                            <li><a href="blog.html">Blog</a></li>
                            <li><a href="contact.html">Contacto</a></li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Detalhes do projeto -->
            <section class="no-top">
                <div class="container">
                    <div class="row g-4">
                        <div class="col-lg-2">
                            <div class="subtitle wow fadeInUp" data-wow-delay=".3s">Detalhes do Projeto</div>
                        </div>

                        <div class="col-lg-10">
                            <div class="row">
                                <div class="col-lg-12">
                                    <div class="row g-4 gx-5 wow fadeInUp" data-wow-delay=".5s">
                                        <div class="col-sm-6">
                                            <h4>Resumo</h4>
                                            <p class="no-bottom" id="project-overview">Carregando resumo...</p>
                                        </div>
                                        <div class="col-sm-6">
                                            <h4>Objetivos</h4>
                                            <ul class="ul-style-2" id="project-objectives">
                                                <li>Carregando objetivos...</li>
                                            </ul>
                                        </div>
                                    </div>

                                    <div class="spacer-double"></div>

                                    <div class="row g-4 gx-5 wow fadeInUp" data-wow-delay=".6s">
                                        <div class="col-lg-3 col-sm-2">
                                            <h6>Categoria</h6>
                                            <span id="project-category">Carregando...</span>
                                        </div>
                                        <div class="col-lg-3 col-sm-2">
                                            <h6>Prêmios</h6>
                                            <span id="project-awards">Carregando...</span>
                                        </div>
                                        <div class="col-lg-3 col-sm-2">
                                            <h6>Cliente</h6>
                                            <span id="project-client">Carregando...</span>
                                        </div>
                                        <div class="col-lg-3 col-sm-2">
                                            <h6>Ano</h6>
                                            <span id="project-year">Carregando...</span>
                                        </div>
                                    </div>

                                    <div class="spacer-double"></div>

                                    <div class="row g-4 wow fadeInUp" data-wow-delay=".7s" id="project-images">
                                        <!-- Imagens carregadas dinamicamente -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Depoimento do cliente -->
            <section class="no-top">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-2">
                            <div class="subtitle wow fadeInUp" data-wow-delay=".3s">Depoimento do Cliente</div>
                        </div>
                        <div class="col-lg-10 wow fadeInUp" data-wow-delay=".4s">
                            <h2 class="lh-1" id="client-says-text">Carregando depoimento...</h2>
                            <p id="client-says-name">Carregando nome do cliente...</p>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Rodapé -->
        <footer>
            <div class="container-fluid">
                <div class="px-2">
                    <div class="row g-4 align-items-center">
                        <div class="col-lg-6">
                            <div class="d-menu-1 wow" data-wow-delay=".3s">
                                <ul>
                                    <li><a href="#">Facebook</a></li>
                                    <li><a href="#">Twitter</a></li>
                                    <li><a href="#">Instagram</a></li>
                                </ul>
                                <p class="no-bottom">Todos os direitos reservados<br>Template por Designesia</p>
                            </div>
                        </div>
                        <div class="col-lg-6 text-lg-end">
                            <a href="contact.html">
                                <h2 class="fs-84 fw-800 pe-3 shuffle wow fadeInLeft" data-wow-delay=".3s">Vamos Conversar</h2>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <!-- Scripts -->
    <script src="js/plugins.js"></script>
    <script src="js/designesia.js"></script>

    <!-- Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <!-- Lightbox JS -->
    <script src="https://cdn.jsdelivr.net/npm/lightbox2@2.11.3/dist/js/lightbox.min.js"></script>

    <script>
        // Configuração Supabase
        const SUPABASE_URL = "https://lkfmtfihkbkjhigrajwb.supabase.co";
        const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxrZm10Zmloa2JramhpZ3JhandiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI5MDIxOTgsImV4cCI6MjA3ODQ3ODE5OH0.J07lM8E3CsMwvbnDXxeXvTboL46-jqa00jDKTJ2mKHM";
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        function getProjectId() {
            const params = new URLSearchParams(window.location.search);
            const id = params.get("id");
            return id ? parseInt(id) : null;
        }

        async function loadProject() {
            const projectId = getProjectId();
            if (!projectId) return console.error("ID do projeto não fornecido na URL");

            const { data, error } = await supabase
                .from("projects")
                .select("*")
                .eq("id", projectId)
                .single();

            if (error) {
                console.error("Erro ao carregar projeto:", error);
                return;
            }

            // Preencher dados
            document.getElementById("project-title").textContent = data.title || "Sem título";
            document.getElementById("project-overview").textContent = data.overview || "Resumo não disponível.";

            // Objetivos
            const objectivesEl = document.getElementById("project-objectives");
            if (data.objectives && Array.isArray(data.objectives) && data.objectives.length > 0) {
                objectivesEl.innerHTML = data.objectives.map(o => `<li>${o}</li>`).join("");
            } else {
                objectivesEl.innerHTML = "<li>Objetivos não fornecidos.</li>";
            }

            // Detalhes
            document.getElementById("project-category").textContent = data.category || "N/A";
            document.getElementById("project-awards").textContent = data.awards || "N/A";
            document.getElementById("project-client").textContent = data.client || "N/A";
            document.getElementById("project-year").textContent = data.year || "N/A";

            // Imagens
            const imagesEl = document.getElementById("project-images");
            if (data.images && Array.isArray(data.images) && data.images.length > 0) {
                imagesEl.innerHTML = data.images.map(img => `
                    <div class="col-lg-6">
                        <div class="hover relative overflow-hidden text-light">
                            <a href="${img}" data-lightbox="project-gallery">
                                <img src="${img}" class="img-fluid hover-scale-1-2" alt="">
                                <div class="absolute bottom-0 w-100 p-4 d-flex text-white justify-content-between">
                                    <div class="d-tag-s2">${data.category || ""}</div>
                                    <div class="fw-bold text-uppercase">${data.client || ""}</div>
                                </div>
                            </a>
                        </div>
                    </div>
                `).join("");
            } else {
                imagesEl.innerHTML = "<p>Imagens não disponíveis.</p>";
            }

            // Depoimento do cliente
            document.getElementById("client-says-text").textContent = data.client_says_text || "Sem depoimento.";
            document.getElementById("client-says-name").textContent = data.client_says_name || "Desconhecido";
        }

        document.addEventListener("DOMContentLoaded", loadProject);
    </script>
</body>
</html>
